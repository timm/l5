
```css
KEYS: multi-objective semi-supervised explainations
(c)2022 Tim Menzies <timm@ieee.org> BSD-2 license

Usage: lua keysgo.lua [Options]

Options:
 -a  --aim   aim; One of {plan,watch,explore}    = plan
 -b  --bins  minimum bin width                   = 16
 -f  --file  file with csv data                  = ../../data/auto93.csv
 -g  --go    start-up example                    = nothing
 -h  --help  show help                           = false
 -K  --K     Bayes hack: low attribute frequency = 1
 -M  --M     Bayes hack: low class frequency     = 2
 -m  --min   stop at n^Min                       = .5
 -r  --rest  expansion best to rest              = 5
 -S  --Some  How many items to keep per row      = 256
 -s  --seed  random number seed                  = 10019
```

[keys](\#keys) | [keyslib](\#keyslib)
 
  <img width="280" 
      align=right 
      src="https://fcit.usf.edu/matrix/wp-content/uploads/2016/12/Robot-11-C.png">
   
 ## Code Conventions
   
 1. `function DATA:new()` is a  constructor for class e.g. DATA 
 2. The help string at top of file is parsed to create the settings.  
 3. Also, all the `go.xx` functions can be run with `lua xplor.lua -g x`.  
 4. Indent = 2 spaces
 5. Line width = 80 chars
 6. Public functions are denoted with a  "---", followed by comment text." 
 7. Public function arguments have the following type hints:
   
 | What        | Notes |                                     
 |:------------|:-----------------------------------|
 | 2 blanks    | 2 blanks denote optional arguments |
 | 4 blanks    | 4 blanks denote local arguments |
 | n           | prefix for numerics |
 | s           | prefix for strings |
 | is          | prefix for booleans |
 | suffix fun  | suffix for functions |                      
 | suffix s    | list of thing (so `names` is list of strings) |
    
Other conventions:
 - In the code, any upper case name (e.g. `DATA` defines a class type)
 - In public function arguments,
   lower case versions of class type (e.g. `data`) are instances of that type (e.g. 
   `data` isa `DATA`).
    

#	keys.lua	


| What | Notes |
|:---|:---|
| XY:new( <b>s</b>:`str`,  <b>n</b>:`num`,  <b>nlo</b>:`num`,  <b>nhi</b>:`num`) |  Count the `y` values from `xlo` to `xhi` |
| XY:__tostring() |  print |
| XY:add( <b>nx</b>:`num`,  <b>sy</b>:`str`,    <b>n</b>:`num`?) |  `n`[=1] times,count `sy`. Expand to cover `nx`  |
| XY:score( <b>want</b>,  <b>B</b>,  <b>R</b>) |  how well does `self` select for `want`? |
| XY:select( <b>row</b>) |  return true if `row` selected by `self` |
| XY:selects( <b>rows</b>:`tab`) |  return subset of `rows` selected by `self` |
| XY:merge( <b>xy</b>:`XY`,  <b>nMin</b>:`num`) |  if whole simpler than parts, return merged self+xy |


### Class methods 	
For lists of `xy`s.	

| What | Notes |
|:---|:---|
| XY.like( <b>xys</b>:`[XY]`,  <b>sWant</b>:`str`,  <b>n</b>:`num`,  <b>nB</b>:`num`,  <b>nR</b>:`num`) |  likelihood we do/dont `sWant` `xys` |
| COL:merge( <b>xys</b>:`[XY]`,   <b>nMin</b>:`num`?) |  Can we combine any adjacent ranges? |
| DATA:sorted() |  sort `self.rows` |


That's all folks	

#	keyslib.lua	

keyslib.lua: misc lua routines	
(c)2022, Tim Menzies BSD-2 clause	
## Linting	
## Random number generator	
The LUA doco says its random number generator is not stable across platforms.	
Hence, we use our own (using Park-Miller).	

| What | Notes |
|:---|:---|
| l.srand( <b>n</b>:`num`) |  reset random number seed (defaults to 937162211)  |
| l.rand( <b>nlo</b>:`num`,  <b>nhi</b>:`num`) |  return float from `nlo`..`nhi` (default 0..1) |
| l.rint( <b>nlo</b>:`num`,  <b>nhi</b>:`num`) |  returns integer from `nlo`..`nhi` (default 0..1) |


## Lists	

| What | Notes |
|:---|:---|
| l.ent( <b>t</b>:`tab`) |  entropy |
| l.kap( <b>t</b>:`tab`,   <b>fun</b>:`fun`?) |  map function `fun`(k,v) over list (skip nil results)  |
| l.keys( <b>t</b>:`tab`) |  sort+return `t`'s keys (ignore things with leading `_`) |
| l.map( <b>t</b>:`tab`,   <b>fun</b>:`fun`?) |  map function `fun`(v) over list (skip nil results)  |
| l.push( <b>t</b>:`tab`,   <b>x</b>?) |  push `x` to end of list; return `x`  |
| l.sd( <b>t</b>:`tab`) |  sorted list standard deviation= (90-10)th percentile/2.58 |


### Sorting Lists	

| What | Notes |
|:---|:---|
| l.sort( <b>t</b>:`tab`,   <b>fun</b>:`fun`?) |  return `t`,  sorted by `fun` (default= `<`) |


## Things to Strings	

| What | Notes |
|:---|:---|
| l.fmt( <b>sControl</b>:`str`,  <b>...</b>) |  emulate printf |
| l.oo( <b>t</b>:`tab`) |  print `t`'s string (the one generated by `o`) |
| l.o( <b>t</b>:`tab`) |  table to string (recursive) |


### Strings to Things	

| What | Notes |
|:---|:---|
| l.coerce( <b>s</b>:`str`) |  return int or float or bool or string from `s` |
| l.options( <b>s</b>:`str`) |  parse help string to extract a table of options |
| l.csv( <b>sFilename</b>:`str`,  <b>fun</b>:`fun`) |  call `fun` on rows (after coercing cell text) |


## Objects	

| What | Notes |
|:---|:---|
| l.obj( <b>s</b>:`str`) |  Create a klass and a constructor + print method |


That's all folks.	
